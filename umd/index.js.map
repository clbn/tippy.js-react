{"version":3,"file":"index.js","sources":["../src/utils.js","../src/TippyGroup.js","../src/Tippy.js"],"sourcesContent":["export function getNativeTippyProps(props) {\n  // eslint-disable-next-line no-unused-vars\n  const { children, onCreate, isVisible, isEnabled, ...nativeProps } = props\n  return nativeProps\n}\n\nexport function hasOwnProperty(obj, key) {\n  return {}.hasOwnProperty.call(obj, key)\n}\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if (hasOwnProperty(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return typeof document !== 'undefined' && document.createElement('div')\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\n\nexport default function TippyGroup({ children, ...props }) {\n  const instances = React.useRef([])\n\n  React.useEffect(() => {\n    tippy.group(instances.current, props)\n    return () => {\n      instances.current = null\n    }\n  }, [])\n\n  return React.Children.map(children, child => {\n    return React.cloneElement(child, {\n      onCreate: instance => {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n        instances.current.push(instance)\n      },\n    })\n  })\n}\n\nTippyGroup.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport {\n  getNativeTippyProps,\n  hasOwnProperty,\n  ssrSafeCreateDiv,\n  preserveRef,\n} from './utils'\n\nimport TippyGroup from './TippyGroup'\n\nfunction Tippy(props) {\n  const [isMounted, setIsMounted] = React.useState(false)\n  const container = React.useRef(ssrSafeCreateDiv())\n  const reference = React.useRef()\n  const instance = React.useRef()\n\n  const options = {\n    ...getNativeTippyProps(props),\n    content: container.current,\n  }\n\n  if (hasOwnProperty(props, 'isVisible')) {\n    options.trigger = 'manual'\n  }\n\n  React.useEffect(() => {\n    instance.current = tippy(reference.current, options)\n\n    const { onCreate, isEnabled, isVisible } = props\n\n    if (onCreate) {\n      onCreate(instance.current)\n    }\n\n    if (isEnabled === false) {\n      instance.current.disable()\n    }\n\n    if (isVisible === true) {\n      instance.current.show()\n    }\n\n    setIsMounted(true)\n\n    return () => {\n      instance.current.destroy()\n      instance.current = null\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (!isMounted) {\n      return\n    }\n\n    instance.current.set(options)\n\n    const { isEnabled, isVisible } = props\n\n    if (isEnabled === true) {\n      instance.current.enable()\n    }\n    if (isEnabled === false) {\n      instance.current.disable()\n    }\n\n    if (isVisible === true) {\n      instance.current.show()\n    }\n    if (isVisible === false) {\n      instance.current.hide()\n    }\n  })\n\n  return (\n    <>\n      {React.cloneElement(props.children, {\n        ref: node => {\n          reference.current = node\n          preserveRef(props.children.ref, node)\n        },\n      })}\n      {isMounted && ReactDOM.createPortal(props.content, container.current)}\n    </>\n  )\n}\n\nTippy.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n    .isRequired,\n  children: PropTypes.element.isRequired,\n  onCreate: PropTypes.func,\n  isVisible: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n}\n\nTippy.defaultProps = {\n  ignoreAttributes: true,\n}\n\nexport default React.forwardRef(function TippyWrapper(props, ref) {\n  return (\n    <Tippy {...props}>\n      {React.cloneElement(props.children, {\n        ref: node => {\n          preserveRef(ref, node)\n          preserveRef(props.children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n\nexport { TippyGroup }\n"],"names":["getNativeTippyProps","props","children","onCreate","isVisible","isEnabled","nativeProps","hasOwnProperty","obj","key","call","preserveRef","ref","node","current","ssrSafeCreateDiv","document","createElement","TippyGroup","instances","React","useRef","useEffect","tippy","group","Children","map","child","cloneElement","instance","push","propTypes","PropTypes","arrayOf","element","isRequired","Tippy","useState","isMounted","setIsMounted","container","reference","options","content","trigger","disable","show","destroy","set","enable","hide","ReactDOM","createPortal","oneOfType","string","func","bool","defaultProps","ignoreAttributes","forwardRef","TippyWrapper"],"mappings":"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"}