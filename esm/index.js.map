{"version":3,"file":"index.js","sources":["../src/utils.js","../src/TippyGroup.js","../src/Tippy.js"],"sourcesContent":["export function getNativeTippyProps(props) {\n  // eslint-disable-next-line no-unused-vars\n  const { children, onCreate, isVisible, isEnabled, ...nativeProps } = props\n  return nativeProps\n}\n\nexport function hasOwnProperty(obj, key) {\n  return {}.hasOwnProperty.call(obj, key)\n}\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if (hasOwnProperty(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return typeof document !== 'undefined' && document.createElement('div')\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\n\nexport default function TippyGroup({ children, ...props }) {\n  const instances = React.useRef([])\n\n  React.useEffect(() => {\n    tippy.group(instances.current, props)\n    return () => {\n      instances.current = null\n    }\n  }, [])\n\n  return React.Children.map(children, child => {\n    return React.cloneElement(child, {\n      onCreate: instance => {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n        instances.current.push(instance)\n      },\n    })\n  })\n}\n\nTippyGroup.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport {\n  getNativeTippyProps,\n  hasOwnProperty,\n  ssrSafeCreateDiv,\n  preserveRef,\n} from './utils'\n\nimport TippyGroup from './TippyGroup'\n\nfunction Tippy(props) {\n  const [isMounted, setIsMounted] = React.useState(false)\n  const container = React.useRef(ssrSafeCreateDiv())\n  const reference = React.useRef()\n  const instance = React.useRef()\n\n  const options = {\n    ...getNativeTippyProps(props),\n    content: container.current,\n  }\n\n  if (hasOwnProperty(props, 'isVisible')) {\n    options.trigger = 'manual'\n  }\n\n  React.useEffect(() => {\n    instance.current = tippy(reference.current, options)\n\n    const { onCreate, isEnabled, isVisible } = props\n\n    if (onCreate) {\n      onCreate(instance.current)\n    }\n\n    if (isEnabled === false) {\n      instance.current.disable()\n    }\n\n    if (isVisible === true) {\n      instance.current.show()\n    }\n\n    setIsMounted(true)\n\n    return () => {\n      instance.current.destroy()\n      instance.current = null\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (!isMounted) {\n      return\n    }\n\n    instance.current.set(options)\n\n    const { isEnabled, isVisible } = props\n\n    if (isEnabled === true) {\n      instance.current.enable()\n    }\n    if (isEnabled === false) {\n      instance.current.disable()\n    }\n\n    if (isVisible === true) {\n      instance.current.show()\n    }\n    if (isVisible === false) {\n      instance.current.hide()\n    }\n  })\n\n  return (\n    <>\n      {React.cloneElement(props.children, {\n        ref: node => {\n          reference.current = node\n          preserveRef(props.children.ref, node)\n        },\n      })}\n      {isMounted && ReactDOM.createPortal(props.content, container.current)}\n    </>\n  )\n}\n\nTippy.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n    .isRequired,\n  children: PropTypes.element.isRequired,\n  onCreate: PropTypes.func,\n  isVisible: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n}\n\nTippy.defaultProps = {\n  ignoreAttributes: true,\n}\n\nexport default React.forwardRef(function TippyWrapper(props, ref) {\n  return (\n    <Tippy {...props}>\n      {React.cloneElement(props.children, {\n        ref: node => {\n          preserveRef(ref, node)\n          preserveRef(props.children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n\nexport { TippyGroup }\n"],"names":["getNativeTippyProps","props","children","onCreate","isVisible","isEnabled","nativeProps","hasOwnProperty","obj","key","call","preserveRef","ref","node","current","ssrSafeCreateDiv","document","createElement","TippyGroup","instances","React","useRef","useEffect","tippy","group","Children","map","child","cloneElement","instance","push","propTypes","PropTypes","arrayOf","element","isRequired","Tippy","useState","isMounted","setIsMounted","container","reference","options","content","trigger","disable","show","destroy","set","enable","hide","ReactDOM","createPortal","oneOfType","string","func","bool","defaultProps","ignoreAttributes","forwardRef","TippyWrapper"],"mappings":"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"}